{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{createWebinarRegistration}from'../services/webinar';import{openRazorpayCheckout}from'../services/razorpay';import{createOrder,verifyPayment}from'../services/webinarApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WebinarRegister=()=>{const navigate=useNavigate();const[form,setForm]=useState({name:'',email:'',phone:''});const[submitting,setSubmitting]=useState(false);const functionsBaseUrl=process.env.REACT_APP_FUNCTIONS_BASE_URL||'http://localhost:5001/YOUR_PROJECT/your-region/api';const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const onSubmit=async e=>{e.preventDefault();setSubmitting(true);try{const{id}=await createWebinarRegistration({...form,amount:99,currency:'INR'});// Create order via Cloud Function\nconst{order}=await createOrder({baseUrl:functionsBaseUrl,registrationId:id,amount:99});await openRazorpayCheckout({name:form.name,email:form.email,phone:form.phone,amount:99,onSuccess:async resp=>{const result=await verifyPayment({baseUrl:functionsBaseUrl,registrationId:id,razorpay_order_id:resp.razorpay_order_id,razorpay_payment_id:resp.razorpay_payment_id,razorpay_signature:resp.razorpay_signature});if(result.success){navigate('/webinar/success?ref='+id);}else{alert('Payment signature verification failed.');}},onFailure:async()=>{alert('Payment failed. Please try again.');}});}catch(err){console.error(err);alert('Registration failed. Please try again.');}finally{setSubmitting(false);}};return/*#__PURE__*/_jsx(\"section\",{className:\"webinar-register\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"section-title\",children:\"Register for Vibe Coding Webinar\"}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',marginBottom:'1rem'},children:\"22 September, 7:00 PM IST \\u2022 Fee: \\u20B999\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"contact-form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:form.name,onChange:handleChange,type:\"text\",placeholder:\"Your Name\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:form.email,onChange:handleChange,type:\"email\",placeholder:\"Your Email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:form.phone,onChange:handleChange,type:\"tel\",placeholder:\"Phone (WhatsApp preferred)\",required:true})}),/*#__PURE__*/_jsx(\"button\",{disabled:submitting,type:\"submit\",className:\"btn btn-primary\",children:submitting?'Processing...':'Pay ₹99 & Register'})]}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',marginTop:'1rem',color:'#666'},children:\"Secure payment via Razorpay. Confirmation sent to your email.\"})]})});};export default WebinarRegister;","map":{"version":3,"names":["React","useState","useNavigate","createWebinarRegistration","openRazorpayCheckout","createOrder","verifyPayment","jsx","_jsx","jsxs","_jsxs","WebinarRegister","navigate","form","setForm","name","email","phone","submitting","setSubmitting","functionsBaseUrl","process","env","REACT_APP_FUNCTIONS_BASE_URL","handleChange","e","target","value","onSubmit","preventDefault","id","amount","currency","order","baseUrl","registrationId","onSuccess","resp","result","razorpay_order_id","razorpay_payment_id","razorpay_signature","success","alert","onFailure","err","console","error","className","children","style","textAlign","marginBottom","onChange","type","placeholder","required","disabled","marginTop","color"],"sources":["/Users/prakash/Documents/vibe-coding/src/pages/WebinarRegister.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createWebinarRegistration } from '../services/webinar';\nimport { openRazorpayCheckout } from '../services/razorpay';\nimport { createOrder, verifyPayment } from '../services/webinarApi';\n\nconst WebinarRegister = () => {\n  const navigate = useNavigate();\n  const [form, setForm] = useState({ name: '', email: '', phone: '' });\n  const [submitting, setSubmitting] = useState(false);\n  const functionsBaseUrl = process.env.REACT_APP_FUNCTIONS_BASE_URL || 'http://localhost:5001/YOUR_PROJECT/your-region/api';\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitting(true);\n    try {\n      const { id } = await createWebinarRegistration({ ...form, amount: 99, currency: 'INR' });\n\n      // Create order via Cloud Function\n      const { order } = await createOrder({ baseUrl: functionsBaseUrl, registrationId: id, amount: 99 });\n\n      await openRazorpayCheckout({\n        name: form.name,\n        email: form.email,\n        phone: form.phone,\n        amount: 99,\n        onSuccess: async (resp) => {\n          const result = await verifyPayment({\n            baseUrl: functionsBaseUrl,\n            registrationId: id,\n            razorpay_order_id: resp.razorpay_order_id,\n            razorpay_payment_id: resp.razorpay_payment_id,\n            razorpay_signature: resp.razorpay_signature,\n          });\n          if (result.success) {\n            navigate('/webinar/success?ref=' + id);\n          } else {\n            alert('Payment signature verification failed.');\n          }\n        },\n        onFailure: async () => {\n          alert('Payment failed. Please try again.');\n        },\n      });\n    } catch (err) {\n      console.error(err);\n      alert('Registration failed. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <section className=\"webinar-register\">\n      <div className=\"container\">\n        <h1 className=\"section-title\">Register for Vibe Coding Webinar</h1>\n        <p style={{ textAlign: 'center', marginBottom: '1rem' }}>22 September, 7:00 PM IST • Fee: ₹99</p>\n        <form className=\"contact-form\" onSubmit={onSubmit}>\n          <div className=\"form-group\">\n            <input name=\"name\" value={form.name} onChange={handleChange} type=\"text\" placeholder=\"Your Name\" required />\n          </div>\n          <div className=\"form-group\">\n            <input name=\"email\" value={form.email} onChange={handleChange} type=\"email\" placeholder=\"Your Email\" required />\n          </div>\n          <div className=\"form-group\">\n            <input name=\"phone\" value={form.phone} onChange={handleChange} type=\"tel\" placeholder=\"Phone (WhatsApp preferred)\" required />\n          </div>\n          <button disabled={submitting} type=\"submit\" className=\"btn btn-primary\">\n            {submitting ? 'Processing...' : 'Pay ₹99 & Register'}\n          </button>\n        </form>\n        <p style={{ textAlign: 'center', marginTop: '1rem', color: '#666' }}>\n          Secure payment via Razorpay. Confirmation sent to your email.\n        </p>\n      </div>\n    </section>\n  );\n};\n\nexport default WebinarRegister;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}