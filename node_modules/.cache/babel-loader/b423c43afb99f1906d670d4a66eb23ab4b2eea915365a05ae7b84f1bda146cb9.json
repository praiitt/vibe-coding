{"ast":null,"code":"import { analyticsService } from './analytics';\nimport { apiService } from './api';\nexport function loadRazorpay(src = 'https://checkout.razorpay.com/v1/checkout.js') {\n  return new Promise((resolve, reject) => {\n    if (document.querySelector(`script[src=\"${src}\"]`)) {\n      resolve(true);\n      return;\n    }\n    const script = document.createElement('script');\n    script.src = src;\n    script.onload = () => resolve(true);\n    script.onerror = () => reject(new Error('Failed to load Razorpay'));\n    document.body.appendChild(script);\n  });\n}\n\n// Webinar-specific checkout\nexport async function openRazorpayCheckout({\n  name,\n  email,\n  phone,\n  experience,\n  goals,\n  amount = 99,\n  onSuccess,\n  onFailure\n}) {\n  try {\n    const loaded = await loadRazorpay();\n    if (!loaded) throw new Error('Razorpay SDK failed to load');\n\n    // Create order via API\n    const orderResponse = await apiService.createWebinarOrder({\n      name,\n      email,\n      phone,\n      experience,\n      goals\n    });\n    const options = {\n      key: process.env.REACT_APP_RAZORPAY_KEY_ID,\n      amount: orderResponse.amount,\n      currency: 'INR',\n      order_id: orderResponse.orderId,\n      name: 'Vibe Coding Webinar',\n      description: 'Registration Fee',\n      image: '/favicon.ico',\n      handler: function (response) {\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(response);\n      },\n      prefill: {\n        name,\n        email,\n        contact: phone\n      },\n      notes: {\n        purpose: 'Webinar Registration',\n        webinarDate: '2024-09-22'\n      },\n      theme: {\n        color: '#667eea'\n      }\n    };\n    const rzp = new window.Razorpay(options);\n    rzp.on('payment.failed', function (response) {\n      onFailure === null || onFailure === void 0 ? void 0 : onFailure(response.error);\n    });\n    rzp.open();\n  } catch (error) {\n    console.error('Error opening webinar checkout:', error);\n    throw error;\n  }\n}\n\n// Subscription checkout\nexport async function openSubscriptionCheckout(plan, options) {\n  try {\n    const loaded = await loadRazorpay();\n    if (!loaded) throw new Error('Razorpay SDK failed to load');\n\n    // Create order via API\n    const orderResponse = await apiService.createSubscriptionOrder(plan);\n    const razorpayOptions = {\n      key: process.env.REACT_APP_RAZORPAY_KEY_ID,\n      amount: orderResponse.amount,\n      currency: 'INR',\n      order_id: orderResponse.orderId,\n      name: 'Vibe Coding',\n      description: `${plan} Subscription`,\n      image: '/favicon.ico',\n      handler: function (response) {\n        var _options$onSuccess;\n        (_options$onSuccess = options.onSuccess) === null || _options$onSuccess === void 0 ? void 0 : _options$onSuccess.call(options, response);\n      },\n      theme: {\n        color: '#667eea'\n      }\n    };\n\n    // Track payment initiation\n    await analyticsService.trackEvent('payment_initiated', {\n      amount: orderResponse.amount,\n      currency: 'INR',\n      tier: plan,\n      orderId: orderResponse.orderId\n    });\n\n    // Open Razorpay checkout\n    const razorpay = new window.Razorpay(razorpayOptions);\n    razorpay.on('payment.failed', function (response) {\n      var _options$onFailure;\n      (_options$onFailure = options.onFailure) === null || _options$onFailure === void 0 ? void 0 : _options$onFailure.call(options, response.error);\n    });\n    razorpay.open();\n  } catch (error) {\n    console.error('Error opening subscription checkout:', error);\n    throw error;\n  }\n}","map":{"version":3,"names":["analyticsService","apiService","loadRazorpay","src","Promise","resolve","reject","document","querySelector","script","createElement","onload","onerror","Error","body","appendChild","openRazorpayCheckout","name","email","phone","experience","goals","amount","onSuccess","onFailure","loaded","orderResponse","createWebinarOrder","options","key","process","env","REACT_APP_RAZORPAY_KEY_ID","currency","order_id","orderId","description","image","handler","response","prefill","contact","notes","purpose","webinarDate","theme","color","rzp","window","Razorpay","on","error","open","console","openSubscriptionCheckout","plan","createSubscriptionOrder","razorpayOptions","_options$onSuccess","call","trackEvent","tier","razorpay","_options$onFailure"],"sources":["/Users/prakash/Documents/vibe-coding/src/services/razorpay.js"],"sourcesContent":["import { analyticsService } from './analytics';\nimport { apiService } from './api';\n\nexport function loadRazorpay(src = 'https://checkout.razorpay.com/v1/checkout.js') {\n  return new Promise((resolve, reject) => {\n    if (document.querySelector(`script[src=\"${src}\"]`)) {\n      resolve(true);\n      return;\n    }\n    const script = document.createElement('script');\n    script.src = src;\n    script.onload = () => resolve(true);\n    script.onerror = () => reject(new Error('Failed to load Razorpay'));\n    document.body.appendChild(script);\n  });\n}\n\n// Webinar-specific checkout\nexport async function openRazorpayCheckout({ name, email, phone, experience, goals, amount = 99, onSuccess, onFailure }) {\n  try {\n    const loaded = await loadRazorpay();\n    if (!loaded) throw new Error('Razorpay SDK failed to load');\n\n    // Create order via API\n    const orderResponse = await apiService.createWebinarOrder({\n      name, email, phone, experience, goals\n    });\n\n    const options = {\n      key: process.env.REACT_APP_RAZORPAY_KEY_ID,\n      amount: orderResponse.amount,\n      currency: 'INR',\n      order_id: orderResponse.orderId,\n      name: 'Vibe Coding Webinar',\n      description: 'Registration Fee',\n      image: '/favicon.ico',\n      handler: function (response) {\n        onSuccess?.(response);\n      },\n      prefill: {\n        name,\n        email,\n        contact: phone,\n      },\n      notes: {\n        purpose: 'Webinar Registration',\n        webinarDate: '2024-09-22',\n      },\n      theme: {\n        color: '#667eea',\n      },\n    };\n\n    const rzp = new window.Razorpay(options);\n    rzp.on('payment.failed', function (response) {\n      onFailure?.(response.error);\n    });\n    rzp.open();\n  } catch (error) {\n    console.error('Error opening webinar checkout:', error);\n    throw error;\n  }\n}\n\n// Subscription checkout\nexport async function openSubscriptionCheckout(plan, options) {\n  try {\n    const loaded = await loadRazorpay();\n    if (!loaded) throw new Error('Razorpay SDK failed to load');\n\n    // Create order via API\n    const orderResponse = await apiService.createSubscriptionOrder(plan);\n\n    const razorpayOptions = {\n      key: process.env.REACT_APP_RAZORPAY_KEY_ID,\n      amount: orderResponse.amount,\n      currency: 'INR',\n      order_id: orderResponse.orderId,\n      name: 'Vibe Coding',\n      description: `${plan} Subscription`,\n      image: '/favicon.ico',\n      handler: function (response) {\n        options.onSuccess?.(response);\n      },\n      theme: {\n        color: '#667eea',\n      },\n    };\n\n    // Track payment initiation\n    await analyticsService.trackEvent('payment_initiated', {\n      amount: orderResponse.amount,\n      currency: 'INR',\n      tier: plan,\n      orderId: orderResponse.orderId\n    });\n\n    // Open Razorpay checkout\n    const razorpay = new window.Razorpay(razorpayOptions);\n    razorpay.on('payment.failed', function (response) {\n      options.onFailure?.(response.error);\n    });\n    razorpay.open();\n\n  } catch (error) {\n    console.error('Error opening subscription checkout:', error);\n    throw error;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}